pipeline {
 agent {
    docker{
      image 'ruby'

    }

 }

   stages {
       stage('build'){
         steps{
           echo  'Building or Resolve Dependecies!'
            sh 'rm -f Gemfile.lock'
            sh 'bundle install'
     }  
   }
   stage('test'){
         steps{
           echo 'Running regression tests' 
             sh 'bundle exec cucumber'

        }    
     }

    stage('UAT'){
         steps{
           echo  'Wait for User Acceptance'
               input(message: 'Go to production?',  ok: 'Yes') 
         }
    }
    
    stage('Prod'){
         steps{
           echo  'Web App is ready!'
         }
    }

 }
}